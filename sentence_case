#!/usr/bin/env node

const fs = require('fs');
const { join } = require('path');
const wikiDir = join(__dirname, '..', 'wiki');

function sortArticles(article1, article2) {
    return (article2[0].match(/\//g) || []).length
         - (article1[0].match(/\//g) || []).length;
}

function articleInfo() {
    return {
        // Current_Full_Path: ['New title', 'New_local_path']
        About: ['About'],
        Accuracy: ['Accuracy'],
        Article_Styling_Criteria: ['Article styling criteria'],
        BanchoBot: ['BanchoBot'],
        BBCode: ['BBCode'],
        Beatmap_Discussion: ['Beatmap discussion'],
        Beatmap_Editor: ['Beatmap editor'],
        'Beatmap_Editor/AiMod': ['AiMod'],
        'Beatmap_Editor/Beat_Snap_Divisor': ['Beat snap divisor'],
        'Beatmap_Editor/Compose': ['Compose'],
        'Beatmap_Editor/Design': ['Design'],
        'Beatmap_Editor/Distance_Snap': ['Distance snap'],
        'Beatmap_Editor/Kiai_Time': ['Kiai time'],
        'Beatmap_Editor/Menu': ['Menu'],
        'Beatmap_Editor/SB_Load': ['SB load'],
        'Beatmap_Editor/Song_Setup': ['Song setup'],
        'Beatmap_Editor/Timelines': ['Timelines'],
        'Beatmap_Editor/Timing': ['Timing'],
        Beatmapping: ['Beatmapping'],
        Beatmaps: ['Beatmaps'],
        'Beatmaps/History_of_Loved': ['History of Loved'],
        'Beatmaps/Packs': ['Packs'],
        'Beatmaps/Title_Text': ['Title text'],
        Chat_Console: ['Chat console'],
        Contests: ['Contests'],
        'Contests/FBC': ['FBC'],
        'Contests/OMC': ['OMC'],
        'Contests/OMC/5': ['5'],
        'Contests/oMWC': ['oMWC'],
        'Contests/oMWC/1': ['1'],
        Difficulties: ['Difficulties'],
        'Difficulties/Easy': ['Easy'],
        'Difficulties/Expert': ['Expert'],
        'Difficulties/Futsuu': ['Futsuu'],
        'Difficulties/Hard': ['Hard'],
        'Difficulties/Insane': ['Insane'],
        'Difficulties/Kantan': ['Kantan'],
        'Difficulties/Muzukashii': ['Muzukashii'],
        'Difficulties/Normal': ['Normal'],
        'Difficulties/Oni': ['Oni'],
        'Difficulties/Ura_Oni': ['Ura Oni'],
        Disambiguation: ['Disambiguation'],
        'Disambiguation/Bancho': ['Bancho'],
        'Disambiguation/Easy': ['Easy'],
        'Disambiguation/EZ': ['EZ'],
        'Disambiguation/Mod': ['Mod'],
        Do_you_really_want_to_ask_peppy: ['Do you really want to ask peppy?'],
        FAQ: ['FAQ'],
        Featured_Artists: ['Featured artists'],
        Game_Modes: ['Game modes'],
        'Game_Modes/osu!': ['osu!'],
        'Game_Modes/osu!catch': ['osu!catch'],
        'Game_Modes/osu!mania': ['osu!mania'],
        'Game_Modes/osu!taiko': ['osu!taiko'],
        Game_Modifiers: ['Game modifiers'],
        'Game_Modifiers/Summary': ['Summary'],
        Glossary: ['Glossary'],
        Guides: ['Guides'],
        'Guides/Adding_Custom_Hit_Sounds': ['Adding custom hit sounds'],
        'Guides/Audio_Editing': ['Audio editing'],
        "Guides/Beginner's_Tutorial": ["Beginner's Tutorial"],
        'Guides/BSS_Issues': ['BSS issues'],
        'Guides/Changing_the_Artist_or_Title': ['Changing the artist or title'],
        'Guides/Collab_Information': ['Collab information'],
        'Guides/Compressing_Files': ['Compressing files'],
        'Guides/Cropping_with_Complex_Backgrounds': ['Cropping with complex backgrounds'],
        'Guides/Cropping_with_Simple_Backgrounds': ['Cropping with simple backgrounds'],
        'Guides/Custom_Hit_Sound_Library': ['Custom hit sound library'],
        'Guides/Custom_Sample_Overrides': ['Custom sample overrides'],
        'Guides/Discord_RPC': ['Discord RPC'],
        'Guides/Getting_Songs_From_Video_Games': ['Getting songs from video games'],
        'Guides/Getting_Your_Map_Modded': ['Getting your map modded'],
        'Guides/GL_Support_Issues': ['GL support issues'],
        'Guides/How_To_Get_Your_Map_Ranked': ['How to get your map Ranked'],
        'Guides/How_to_Play_osu!mania': ['How to play osu!mania'],
        'Guides/How_to_Time_Songs': ['How to time songs'],
        'Guide/How_to_Use_the_Offset_Wizard': ['How to use the offset wizard'],
        'Guides/Live_Streaming_osu!': ['Live streaming osu!'],
        'Guides/Making_Properly_Centered_Spinners': ['Making properly centered spinners'],
        'Guides/Music_Theory': ['Music theory'],
        'Guides/osu!mania_Mapping_Guide': ['osu!mania mapping guide'],
        'Guides/Recording_osu!': ['Recording osu!'],
        'Guides/Searching_and_Downloading_Beatmaps': ['Searching and downloading beatmaps'],
        'Guides/Setting_the_Offset_on_the_Correct_Beat': ['Setting the offset on the correct beat'],
        'Guides/Starting_a_Beatmap_Project': ['Starting a beatmap project'],
        'Guides/Tablet_Purchase': ['Tablet purchase'],
        'Guides/Tips_and_Tricks_on_Skill_Improvement': ['Tips and tricks on skill improvement'],
        'Guides/Videos_From_Youtube': ['Videos from YouTube'],
        Help_Centre: ['Help centre'],
        'Help_Center/Account_Restrictions': ['Account restrictions'],
        'History_of_osu!': ['History of osu!'],
        'History_of_osu!/2007': ['2007'],
        'History_of_osu!/2008': ['2008'],
        'History_of_osu!/2009': ['2009'],
        'History_of_osu!/2010': ['2010'],
        'History_of_osu!/2011': ['2011'],
        'History_of_osu!/2012': ['2012'],
        'History_of_osu!/2013': ['2013'],
        'History_of_osu!/2014': ['2014'],
        'History_of_osu!/2015': ['2015'],
        'History_of_osu!/2016': ['2016'],
        'History_of_osu!/2017': ['2017'],
        'History_of_osu!/2018': ['2018'],
        'History_of_osu!/osu!wiki': ['osu! wiki'],
        Hit_Objects: ['Hit objects'],
        'How_You_Can_Help!': ['How you can help!'],
        Installation: ['Installation'],
        'Installation/macOS': ['macOS'],
        Interface: ['Interface'],
        Internet_Relay_Chat: ['IRC'],
        Legal: ['Legal'],
        'Legal/Copyright': ['Copyright'],
        'Legal/Privacy': ['Privacy'],
        'Legal/Terms': ['Terms'],
        Main_Page: ['Main page'],
        Mapping_Techniques: ['Mapping techniques'],
        'Mapping_Techniques/Basics': ['Basics'],
        'Mapping_Techniques/Formations': ['Formations'],
        'Mapping_Techniques/Jumps': ['Jumps'],
        'Mapping_Techniques/Making_Good_Sliders': ['Making good sliders'],
        'Mapping_Techniques/Rhythm': ['Rhythm'],
        'Mapping_Techniques/Sliders': ['Sliders'],
        'Mapping_Techniques/Spinners': ['Spinners'],
        'Mapping_Techniques/Unrankable': ['Unrankable'],
        Mascots: ['Mascots'],
        'Mascots/Gallery': ['Gallery'],
        Medals: ['Medals'],
        'Medals/Beatmap_Packs_0916': ['Beatmap packs 0916'],
        Modding: ['Modding'],
        Multi: ['Multi'],
        News_Styling_Criteria: ['News styling criteria'],
        Options: ['Options'],
        'Options/Keyboard_Bindings': ['Keyboard bindings'],
        'Options/Offset_Wizard': ['Offset wizard'],
        Organisations: ['Organisations'],
        'Organisations/osu!_UCI': ['osu! UCI'],
        'osu!_File_Formats': ['osu! file formats'],
        'osu!_File_Formats/Db_(file_format)': ['.db (file format)'],
        'osu!_File_Formats/Osb_(file_format)': ['.osb (file format)'],
        'osu!_File_Formats/Osk_(file_format)': ['.osk (file format)'],
        'osu!_File_Formats/Osr_(file_format)': ['.osr (file format)'],
        'osu!_File_Formats/Osu_(file_format)': ['.osu (file format)'],
        'osu!_File_Formats/Osz_(file_format)': ['.osz (file format)'],
        'osu!_Program_Files': ['osu! program files'],
        'osu!_Program_Files/User_Configuration_File': ['User configuration file'],
        'osu!academy': ['osu!academy'],
        'osu!api': ['osu!api'],
        'osu!stream': ['osu!stream'],
        'osu!stream/Song_List': ['Song list'],
        'osu!supporter': ['osu!supporter'],
        'osu!talk': ['osu!talk'],
        'osu!tourney': ['osu!tourney'],
        'osu!tourney/Multiplayer_Usage': ['Multiplayer usage'],
        'osu!tourney/Prizes': ['Prizes'],
        'osu!tourney/Setup': ['Setup'],
        'osu!tourney/Skinning': ['Skinning'],
        'osu!tourney/Spectator_Usage': ['Spectator usage'],
        'osu!tourney/Tournament_Management_Commands': ['Tournament management commands'],
        'osu!tourney/Troubleshooting': ['Troubleshooting'],
        'osu!wiki_Contribution_Guide': ['osu! wiki contribution guide'],
        'osu!wiki_Contribution_Guide/Common_Issues': ['Common issues'],
        'osu!wiki_Contribution_Guide/GitHub_Desktop': ['GitHub Desktop'],
        'osu!wiki_Contribution_Guide/GitHub_Web_Interface': ['GitHub web interface'],
        People: ['People'],
        'People/Community_Contributors': ['Community Contributors'],
        'People/The_Team': ['The Team'],
        'People/The_Team/Beatmap_Nominators': ['Beatmap Nominators'],
        'People/The_Team/Beatmap_Nominators/Beatmap_Veto': ['Beatmap veto'],
        'People/The_Team/Beatmap_Nominators/General_Information': ['General information'],
        'People/The_Team/Beatmap_Nominators/Rules': ['Rules'],
        'People/The_Team/Developers': ['Developers'],
        'People/The_Team/Global_Moderation_Team': ['Global Moderation Team'],
        'People/The_Team/Language_Moderators': ['Language moderators'],
        'People/The_Team/Nomination_Assessment_Team': ['Nomination Assessment Team'],
        'People/The_Team/osu!_Alumni': ['osu! Alumni'],
        'People/The_Team/Project_Loved_Team': ['Project Loved Team'],
        'People/The_Team/Support_Team': ['Support Team'],
        Performance_Points: ['Performance points'],
        'Performance_Points/ppv1': ['ppv1'],
        Play_Styles: ['Play styles'],
        Project_Loved: ['Project Loved'],
        Projects: ['Projects'],
        Quality_Assurance_Team_Blog: ['Quality Assurance Team Blog'],
        Ranking_Criteria: ['Ranking criteria'],
        'Ranking_Criteria/Code_of_Conduct': ['Code of conduct'],
        'Ranking_Criteria/Difficulty_Naming': ['Difficulty naming'],
        'Ranking_Criteria/osu!': ['osu!'],
        'Ranking_Criteria/osu!/Scaling_BPM': ['Scaling BPM'],
        'Ranking_Criteria/osu!catch': ['osu!catch'],
        'Ranking_Criteria/osu!mania': ['osu!mania'],
        'Ranking_Criteria/osu!taiko': ['osu!taiko'],
        'Ranking_Criteria/Skin_Set_List': ['Skin set list'],
        'Ranking_Criteria/Song_Content_Rules': ['Song content rules'],
        'Ranking_Criteria/Timing_Songs_With_8-Signatures': ['Timing songs with 8-signatures'],
        'Ranking_Criteria/Visual_Content_Considerations': ['Visual content considerations'],
        Registration: ['Registration'],
        Replay: ['Replay'],
        Reporting_Bad_Behaviour: ['Reporting bad behaviour'],
        'Reporting_Bad_Behaviour/Handling_Foul_Play': ['Handling foul play'],
        Rules: ['Rules'],
        Score: ['Score'],
        'Score/ScoreV1': ['ScoreV1'],
        Shortcut_Key_Reference: ['Shortcut key reference'],
        Sitemap: ['Sitemap'],
        Skinning: ['Skinning'],
        'Skinning/FAQ': ['FAQ'],
        'Skinning/Guides_and_Important_Threads': ['Guides and important threads'],
        'Skinning/History': ['History'],
        'Skinning/Interface': ['Interface'],
        'Skinning/osu!': ['osu!'],
        'Skinning/osu!catch': ['osu!catch'],
        'Skinning/osu!mania': ['osu!mania'],
        'Skinning/osu!taiko': ['osu!taiko'],
        'Skinning/skin.ini': ['skin.ini'],
        'Skinning/skin.ini/Blank': ['Blank'],
        'Skinning/Sounds': ['Sounds'],
        Skinning_Tutorial: ['Skinning tutorial'],
        'Skinning_Tutorial/Interface': ['Interface skinning tutorial'],
        'Skinning_Tutorial/osu!': ['osu! skinning tutorial'],
        'Skinning_Tutorial/osu!catch': ['osu!catch skinning tutorial'],
        'Skinning_Tutorial/osu!mania': ['osu!mania skinning tutorial'],
        'Skinning_Tutorial/osu!taiko': ['osu!taiko skinning tutorial'],
        'Skinning_Tutorial/skin.ini': ['skin.ini tutorial'],
        Staff_Log: ['Staff log'],
        'Staff_Log/2014': ['2014'],
        'Staff_Log/2015': ['2015'],
        'Staff_Log/2016': ['2016'],
        'Staff_Log/2017': ['2017'],
        'Staff_Log/2018': ['2018'],
        'Staff_Log/2019': ['2019'],
        Storyboard_Scripting: ['Storyboard scripting'],
        'Storyboard_Scripting/Audio': ['Audio'],
        'Storyboard_Scripting/Cheat_Sheet': ['Cheat sheet'],
        'Storyboard_Scripting/Commands': ['Commands'],
        'Storyboard_Scripting/Compound_Commands': ['Compound commands'],
        'Storyboard_Scripting/General_Rules': ['General rules'],
        'Storyboard_Scripting/Objects': ['Objects'],
        'Storyboard_Scripting/osu!_File_Toggles': ['osu! file toggles'],
        'Storyboard_Scripting/Shorthand': ['Shorthand'],
        'Storyboard_Scripting/Variables': ['Variables'],
        Storyboarding: ['Storyboarding'],
        Storyboards: ['Storyboards'],
        'Storyboards/Maps': ['Maps'],
        Submission: ['Submission'],
        'Submission/Beatmap_Ranking_Procedure': ['Beatmap ranking procedure'],
        Tournament_Drawings: ['Tournament drawings'],
        Tournaments: ['Tournaments'],
        'Tournaments/ANZT': ['ANZT'],
        'Tournaments/ANZT/2018_Summer': ['2018 Summer'],
        'Tournaments/ANZT/2018_Winter': ['2018 Winter'],
        'Tournaments/ANZT/2019_Summer': ['2019 Summer'],
        'Tournaments/AOTS': ['AOTS'],
        'Tournaments/AOTS/AOTS_1': ['AOTS 1'],
        'Tournaments/AOTS/ATS_2018': ['ATS 2018'],
        'Tournaments/AOTS/IDTS_1': ['IDTS 1'],
        'Tournaments/BTT': ['BTT'],
        'Tournaments/BTT/4': ['4'],
        'Tournaments/CFC': ['CFC'],
        'Tournaments/CFC/2': ['2'],
        'Tournaments/CFC/3': ['3'],
        'Tournaments/CFC/4': ['4'],
        'Tournaments/CFC/CFIC_1': ['CFIC 1'],
        'Tournaments/CIC': ['CIC'],
        'Tournaments/CIC/2018': ['2018'],
        'Tournaments/CJB_4K': ['CJB 4K'],
        'Tournaments/CJB_4K/2018': ['2018'],
        'Tournaments/CMT_4K': ['CMT 4K'],
        'Tournaments/CMT_4K/2017': ['2017'],
        'Tournaments/CMT_4K/2018': ['2018'],
        'Countries_that_participated_in_osu!_tournaments': ['Countries that participated in osu! tournaments'],
        'Tournaments/CWC': ['CWC'],
        'Tournaments/CWC/1': ['1'],
        'Tournaments/CWC/2013': ['2013'],
        'Tournaments/CWC/2014': ['2014'],
        'Tournaments/CWC/2015': ['2015'],
        'Tournaments/CWC/2016': ['2016'],
        'Tournaments/CWC/2017': ['2017'],
        'Tournaments/CWC/2018': ['2018'],
        'Tournaments/CWC/2019': ['2019'],
        'Tournaments/DMX': ['DMX'],
        'Tournaments/DMX/2': ['2'],
        'Tournaments/DMX/3': ['3'],
        'Tournaments/EUTT': ['EUTT'],
        'Tournaments/EUTT/2018': ['2018'],
        'Tournaments/GO': ['GO'],
        'Tournaments/GO/3': ['3'],
        'Tournaments/GTS': ['GTS'],
        'Tournaments/GTS/AGTS_2019': ['AGTS 2019'],
        'Tournaments/GTS/IGTS_2018': ['IGTS 2018'],
        'Tournaments/GTS/IGTS_2019': ['IGTS 2019'],
        'Tournaments/LMS': ['LMS'],
        'Tournaments/LMS/Shift_1': ['Shift 1'],
        'Tournaments/MALE': ['MALE'],
        'Tournaments/MP4K': ['MP4K'],
        'Tournaments/MP4K/3': ['3'],
        'Tournaments/MWC': ['MWC'],
        'Tournaments/MWC/2014': ['2014'],
        'Tournaments/MWC/2015': ['2015'],
        'Tournaments/MWC/2016_4K': ['2016 4K'],
        'Tournaments/MWC/2016_7K': ['2016 7K'],
        'Tournaments/MWC/2017_4K': ['2017 4K'],
        'Tournaments/MWC/2017_7K': ['2017 7K'],
        'Tournaments/MWC/2018_4K': ['2018 4K'],
        'Tournaments/MWC/2018_7K': ['2018 7K'],
        'Tournaments/MWC/2019_4K': ['2019 4K'],
        'Tournaments/MWC/2019_7K': ['2019 7K'],
        'Tournaments/MXB': ['MXB'],
        'Tournaments/MXB/3': ['3'],
        'Tournaments/NT': ['NT'],
        'Tournaments/NT/NSST_2019': ['NSST 2019'],
        'Tournaments/NT/NWT_2019': ['NWT 2019'],
        'Tournaments/o!AOT': ['o!AOT'],
        'Tournaments/o!AOT/1': ['1'],
        'Tournaments/o!ET': ['o!ET'],
        'Tournaments/o!ET/2': ['2'],
        'Tournaments/OMIC': ['OMIC'],
        'Tournaments/OMIC/2019_4K': ['2019 4K'],
        'Tournaments/o!mLN': ['o!mLN'],
        'Tournaments/o!mLN/1': ['1'],
        'Tournaments/oMMFF': ['oMMFF'],
        'Tournaments/oMMFF/1': ['1'],
        'Tournaments/oPHF': ['oPHF'],
        'Tournaments/oPHF/2018': ['2018'],
        'Tournaments/oPHN': ['oPHN'],
        'Tournaments/oPHN/4K_2019': ['4K 2019'],
        'Tournaments/oPHST': ['oPHST'],
        'Tournaments/oPHST/2018': ['2018'],
        'Tournaments/oSEAT': ['oSEAT'],
        'Tournaments/oSEAT/2': ['2'],
        'Tournaments/OTC': ['OTC'],
        'Tournaments/OTC/1': ['1'],
        'Tournaments/OTC/2': ['2'],
        'Tournaments/OTC/3': ['3'],
        'Tournaments/otst!': ['otst!'],
        'Tournaments/otst!/2018': ['2018'],
        'Tournaments/otst!/2019': ['2019'],
        'Tournaments/oTTMT': ['oTTMT'],
        'Tournaments/oTTMT/1': ['1'],
        'Tournaments/OWC': ['OWC'],
        'Tournaments/OWC/1': ['1'],
        'Tournaments/OWC/2': ['2'],
        'Tournaments/OWC/3': ['3'],
        'Tournaments/OWC/2013': ['2013'],
        'Tournaments/OWC/2014': ['2014'],
        'Tournaments/OWC/2015': ['2015'],
        'Tournaments/OWC/2016': ['2016'],
        'Tournaments/OWC/2017': ['2017'],
        'Tournaments/OWC/2018': ['2018'],
        'Tournaments/OZT': ['OZT'],
        'Tournaments/OZT/2018': ['2018'],
        'Tournaments/RMoTI': ['RMoTI'],
        'Tournaments/RMoTI/2': ['2'],
        'Tournaments/RMoTI/5': ['5'],
        'Tournaments/SOFT': ['SOFT'],
        'Tournaments/SOFT/3': ['3'],
        'Tournaments/SOFT/4': ['4'],
        'Tournaments/SST': ['SST'],
        'Tournaments/SST/2018': ['2018'],
        'Tournaments/T2T': ['T2T'],
        'Tournaments/T2T/2019': ['2019'],
        'Tournaments/Template': ['Template'],
        'Tournaments/THOM_CUP': ['THOM Cup'],
        'Tournaments/THOM_CUP/1': ['1'],
        'Tournaments/TMT': ['TMT'],
        'Tournaments/TMT/2TMT': ['2TMT'],
        'Tournaments/TNMT': ['TNMT'],
        'Tournaments/TNMT/1': ['1'],
        'Tournaments/TSC': ['TSC'],
        'Tournaments/TSC/1': ['1'],
        'Tournaments/TW': ['TW'],
        'Tournaments/TW/1': ['1'],
        'Tournaments/TWC': ['TWC'],
        'Tournaments/TWC/3': ['3'],
        'Tournaments/TWC/2011': ['2011'],
        'Tournaments/TWC/2014': ['2014'],
        'Tournaments/TWC/2015': ['2015'],
        'Tournaments/TWC/2016': ['2016'],
        'Tournaments/TWC/2017': ['2017'],
        'Tournaments/TWC/2018': ['2018'],
        'Tournaments/TWC/2019': ['2019'],
        'Tournaments/Zotcade': ['Zotcade'],
        'Tournaments/Zotcade/2019': ['2019'],
        Twitter: ['Twitter'],
        Visual_Settings: ['Visual settings'],
        Welcome: ['Welcome']
    };
}

// Loop through all of the articles, starting with the deepest in the file tree
for (const article of Object.entries(articleInfo()).sort(sortArticles)) {
    const oldFullPath = join(wikiDir, article[0]);
    const newTitle = article[1][0];
    const newBasePath = article[1][1];
    const newFullPath = join(oldFullPath, '..', newBasePath);

    // Fix title in English article
    const articleContent = fs.readFileSync(join(oldFullPath, 'en.md'), 'utf8');
    const articleContentNewTitle = articleContent.replace(/^# .+?$/m, `# ${newTitle}`);
    //fs.writeFileSync(join(oldFullPath, 'en.md'));

    // Rename folder
    //fs.renameSync(oldFullPath, newFullPath);
}
